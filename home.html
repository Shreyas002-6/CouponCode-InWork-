<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Home</title>
  

</head>
<body>
<!-- partial:index.partial.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <style>
  </style>
  <!-- Design by foolishdeveloper.com -->
    <title>Home</title>
 
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;600&display=swap" rel="stylesheet">
    <script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!--Stylesheet-->
    <style media="screen">
      table{
        text-align: center;
      }
      .trow{
        height: 100px;
      }
      .tbrand{
        background-image: url("");
      }
      .linkb{
        background-color: #F0FFFF;
        color: black;
        border: 1px solid pink;
        border-radius: 10px;
        padding: 5px 30px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
      }

      .linkb:hover, .linkb:active {
        background-color: pink;
        color: black;
        border: 0;
      }
      
     </style>
</head>
<body style="background: #F0FFFF;">
    
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">
    <nav class="navbar navbar-light bg-light">
    <a class="navbar-brand" href="#">
      <img src="https://cdn-icons-png.flaticon.com/512/714/714000.png" alt="" width="50" height="50" class="d-inline-block align-text-top">
    </a>
</nav>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profile.html">Profile</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="Sell.html">Sell</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="" id="findmail" style="color:red;"></a>
        </li>
     
      </ul>
    </div>

  </div>
</nav>

<!--<h3>In Work</h3>-->
<!--<button class="btn btn-primary" id="load" type="submit">Load</button>-->
<div class="container mt-3">

  <table class="table">
  <thead>
    <th>Brand</th>
    <!--<th>Code</th>-->
    <th>Discount(%)</th>
    <th>Price(â‚¹)</th>
    <th>Seller</th>
    <th>Upi</th>
    <th>Buy</th>
  </thead>
  <tbody id="tbody1"></tbody>
</table>

</div>



</body>
<script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js";
      import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, setPersistence, browserSessionPersistence, onAuthStateChanged, updateProfile} from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";
      import { getDatabase, ref, set, get, child, onValue } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js";
      // TODO: Add SDKs for Firebase products that you want to use
      // https://firebase.google.com/docs/web/setup#available-libraries

      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      const firebaseConfig = {
  apiKey: "AIzaSyAF4RsudBehqYS8GgLi7Y99vO5Yq1oTlSo",
  authDomain: "sampletest-9fa7f.firebaseapp.com",
  databaseURL: "https://sampletest-9fa7f-default-rtdb.firebaseio.com",
  projectId: "sampletest-9fa7f",
  storageBucket: "sampletest-9fa7f.appspot.com",
  messagingSenderId: "368017887645",
  appId: "1:368017887645:web:26b82f19d89b7030565f74",
  measurementId: "G-6HYJLLWTLN"
};

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const auth = getAuth();
      console.log(app);
      const user = auth.currentUser;


      onAuthStateChanged(auth, (user) => {
  if (user) {
    // User is signed in, see docs for a list of available properties
    // https://firebase.google.com/docs/reference/js/firebase.User
    const uid = user.uid;
    console.log(uid)
    var mail = document.querySelector("#findmail");
    findmail.innerHTML = user.email;
    console.log(user)

const db = getDatabase();
    const dbref = ref(db);

            get(child(dbref, "Coupon"))
            .then((snapshot)=>{
                if(snapshot.exists()){
               console.log(snapshot.val())





  var tbody = document.getElementById("tbody1");
function AddoneData(brand, dis, price, mail, upi){///code

let trow = document.createElement("tr");
trow.className="trow";
let td1 = document.createElement("td");
td1.className = "tbrand";
///let td2 = document.createElement("td");
let td3 = document.createElement("td");
let td4 = document.createElement("td");
let td5 = document.createElement("td");
let td6 = document.createElement("td");
let td7 = document.createElement("td");
let a = document.createElement("a");
let link = document.createTextNode("Buy");
a.appendChild(link);
a.title = "Buy"; 
a.href = "https://razorpay.com/payment-gateway/"; 
a.className = "linkb";



td1.innerHTML = brand;
///td2.innerHTML = code;
td3.innerHTML = dis;
td4.innerHTML = price;
td5.innerHTML = mail;
td6.innerHTML = upi;



trow.appendChild(td1);
///trow.appendChild(td2);
trow.appendChild(td3);
trow.appendChild(td4);
trow.appendChild(td5);
trow.appendChild(td6);
trow.appendChild(td7);
td7.appendChild(a);

tbody.appendChild(trow);
}

function AddallData(TheData){

tbody.innerHTML = "";
TheData.forEach(element =>{
  AddoneData(element.brand, element.dis, element.price, element.mail, element.upi);///element.code

});

}

//getting all data
function AddallDataonce(){


  const dbref = ref(db);


get(child(dbref,"Coupon"))
.then((snapshot)=>{

  var data = [];
  snapshot.forEach(childSnapshot => {
    data.push(childSnapshot.val());
  });
AddallData(data);

});
}

function AddallDataIRL(){


  const dbref = ref(db,"Coupon");

onValue(dbref,(snapshot)=>{
  var data = [];
  snapshot.forEach(childSnapshot => {
    data.push(childSnapshot.val());
  });
AddallData(data);

})

}



AddallDataonce();















                } else {
                    alert("No Coupons found");
                }
            })
            .catch((error)=>{
                alert(error)
})
    // ...
  } else {
    // User is signed out
    // ...
  }
});


      

    
      </script>
</html>
<!-- partial -->
  
</body>
</html>


